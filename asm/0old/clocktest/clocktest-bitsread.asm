;WC-80 COMPUTER BOOTLOADER - alnwlsn 2021
;to be stored at address 0x0000 in rom bank 0 (loads on boot)
;sets up slots 0-3 with ram, loads program into ram at 0x0000, and jumps to it.
org 0x3000

seq:
db 0xC1
db 0xC0
db 0xC1
db 0xC0
db 0xC0
db 0xC0
db 0xC1
db 0xC1
db 0xC0
db 0xC1
db 0xC0
db 0xC1
db 0xC1
db 0xC1
db 0xC0
db 0xC0
db 0xC1
db 0xC1
db 0xC0
db 0xC0
db 0xC0
db 0xC1
db 0xC0
db 0xC1
db 0xC0
db 0xC0
db 0xC1
db 0xC1
db 0xC1
db 0xC0
db 0xC1
db 0xC0
db 0xC1
db 0xC0
db 0xC1
db 0xC0
db 0xC0
db 0xC0
db 0xC1
db 0xC1
db 0xC0
db 0xC1
db 0xC0
db 0xC1
db 0xC1
db 0xC1
db 0xC0
db 0xC0
db 0xC1
db 0xC1
db 0xC0
db 0xC0
db 0xC0
db 0xC1
db 0xC0
db 0xC1
db 0xC0
db 0xC0
db 0xC1
db 0xC1
db 0xC1
db 0xC0
db 0xC1
db 0xC0

stor:
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00
db 0x00

start:
;read at leat one byte to reset clock chip pointer
ld a,(0x8000)
;write the special sequence so the clock will respond
ld de,0x8000
ld hl,seq
ld b,64
loop1:
ld a,(hl)
ld (de),a
inc de
inc hl
dec b
jr nz, loop1

;read the info from the clock
ld de,stor
ld hl,0x8000
ld b,64
loop2:
ld a,(hl)
and 0x01
ld (de),a
inc de
inc hl
dec b
ld a,b
cp 0
jr nz, loop2

jp 0x4000 ;jump to the Monitor
